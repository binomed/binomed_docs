<!-- .slide: data-background="./assets/images/html5_cool.jpeg" data-state="hidefooter" class="transition first-slide" data-type-show="prez"  -->

# Les nouveaux supers<br> pouvoirs du web

### 2017.05.11  @ **Riviera Dev**

<div class="copyrights white">kohaku Yoshida</div>

##==##

<!-- .slide: data-background="./assets/images/html5_cool.jpeg" data-state="hidefooter" class="transition first-slide" data-type-show="full"  -->

# Les nouveaux supers<br> pouvoirs du web

### 2017

<div class="copyrights white">kohaku Yoshida</div>

##==##

<!-- .slide: class="who-am-i" data-state="quit-question" -->

## Qui suis-je ?

### Jean-François Garreau


<!-- .element: class="descjf" -->
Senior innovation developper & Community Manager

![avatar w-300 wp-200](assets/images/jf.jpg)


![company_logo](assets/images/lucca_logo.png)
![gdg_logo](assets/images/GDG-Logo-carre.png)

<!-- .element: class="twitter" -->
[@jefBinomed](http://twitter.com/jefBinomed)

<!-- .element: class="gplus" -->
[+JeanFrancoisGarreau](http://plus.google.com/+JeanFrancoisGarreau)

##==##

<!-- .slide: data-background="./assets/images/once-upon-a-time.jpg" data-state="hidefooter" class="transition no-filter"-->

##==##

<!-- .slide: class="transition-black"-->

# Un combat vieux comme le monde


##==##
<!--  .slide: data-background="./assets/images/civil_war_full.jpg" class="transition no-filter"-->


##==##

# Un combat inégal au début

<br>

![center](./assets/images/native-app-illustration_1x.jpg)


##==##

<!-- .slide: class="flex-p" -->

# Elles se croyaient au-dessus de tout !


![h-300](./assets/images/irondroid.jpg)
![h-300](./assets/images/ironman-osx_240.jpg)

<div class="copyrights black">_IronDroid_, Jamie BiversProduct</div>

##==##


# Mais ça c'était avant


![h-500 center](./assets/images/html5-superheros.png)

##==##

<!-- .slide: data-background="./assets/images/inception_webapp_full.jpg" class="transition no-filter"-->


##==##

<!-- .slide: data-type-show="prez" -->

## De quoi parle-t-on ?


<!-- .element: class="fragment" -->
Sensors

<br>

<!-- .element: class="fragment" -->
Nouvelles API

Notes:
Sensors : Geoloc/Gyroscope/...
Nouvelles Possibilités : Offline / DB / Raccourcis

##==##

<!-- .slide: data-type-show="full" -->

## De quoi parle-t-on ?


* Sensors :
 * Geolocation
 * Gyroscope / Accelometer / Compass
 * Proximity
 * ...

<br>

* Nouvelles possibilités :
 * Offline
 * Base de données
 * Raccourcis applicatifs


##==##

<!--
//    _____  _               _           ___          __  _
//   |  __ \| |             (_)         | \ \        / / | |
//   | |__) | |__  _   _ ___ _  ___ __ _| |\ \  /\  / /__| |__
//   |  ___/| '_ \| | | / __| |/ __/ _` | | \ \/  \/ / _ \ '_ \
//   | |    | | | | |_| \__ \ | (_| (_| | |  \  /\  /  __/ |_) |
//   |_|    |_| |_|\__, |___/_|\___\__,_|_|   \/  \/ \___|_.__/
//                  __/ |
//              |___/
 -->

<!-- .slide: class="transition-black"  -->

# Le Physical Web

![icon](./assets/images/physical_web.png)

##==##

<!-- .slide: data-background="./assets/images/inception_physical_web_full.jpg" class="transition no-filter"-->


##==##

<!-- .slide: data-type-show="prez" -->

## Physical Web


<!-- .element: class="fragment" -->
Date de 2015

<!-- .element: class="fragment" -->
Basé sur Eddystone & le BLE

Notes:
A besoin d'un application native (PlayServices)
Sur EddyStone URL
Aujourd'hui : UID / URL / EID / TLM

##==##

<!-- .slide: data-type-show="full" -->

## Physical Web

### Origines & possibilités

 * Apparu en 2015 : [Projet Physical Web](https://google.github.io/physical-web/)
 * Basé sur Eddystone et plus précisément sur les [Eddystone-URL](https://github.com/google/eddystone/tree/master/eddystone-url)
 * S'utilise avec des devices BLE
 * À besoin d'une application détectant le physical Web (Chrome / Firefox)

Notes:
Aujourd'hui : UID / URL / EID / TLM


##==##

## Physical Web

### Pour quoi faire ?

 ![center h-500](./assets/images/physical_web_use_case.png)

Notes:
cas décentralisé, cas centralisé, ...

##==##

<!-- .slide: class="transition-white" data-type-show="prez" -->

# Restrictions

![icon](./assets/images/partial_chrome_256x256.png)

Notes:
 * Site accessible sur l'internet mondial
 * L'url est limité par la norme eddystone => Il vaut mieux utiliser des shorts urls

##==##

<!-- .slide: data-type-show="full" -->

## Physical Web

### Restrictions

 * Site accessible sur l'internet mondial
 * L'URL est limitée par la norme Eddystone => Il vaut mieux utiliser des shorts urls

##==##



<div class="compat">
  <div class="chrome">
    <div class="desktop unsupport">-</div>
    <div class="os partial">-</div>
    <div class="android">49+</div>
    <div class="ios">44+</div>
  </div>
  <div class="firefox">
    <div class="desktop unsupport">-</div>
    <div class="os partial">magnet</div>
    <div class="android unsupport">-</div>
    <div class="ios unsupport">-</div>
  </div>
  <div class="opera">
    <div class="desktop unsupport">-</div>
    <div class="android">32+</div>
  </div>
  <div class="edge">
    <div class="desktop unsupport">-</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios unsupport">-</div>
  </div>
</div>

##==##

<!-- .slide: data-state="quit-question" data-type-show="prez" -->

## Et si on jouait ?

![h-400 binomed](./assets/images/qr_code_jeux_https.png)

![h-400 rawgit](./assets/images/qr_code_jeux_rawgit.png)

<br>

<div class="url_jeux binomed grey">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit grey">https://goo.gl/Kp7Cyi</div>



##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="quit-question" data-type-show="prez"-->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>

<div class="qui-veut-gagner">
    <div class="question"> Préparez-vous</div>

</div>

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="question-1" data-type-show="prez"-->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <div class="question two-line"> Grâce à quoi puis-je contrôler une balise bluetooth ? </div>
    <div class="row">
        <div class="resp repA"> IBeacon</div>
        <div class="resp repB"> Physical Web</div>
    </div>
    <div class="row">
        <div class="resp repC"> WebBluetooth</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="resp-question-1" data-type-show="prez"-->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <canvas id="chart_question_1" width="200" height="200" class="chart-resp"></canvas>
   <div class="question two-line"> Grâce à quoi puis-je contrôler une balise bluetooth ? </div>
    <div class="row">
        <div class="resp repA"> IBeacon</div>
        <div class="resp repB"> Physical Web</div>
    </div>
    <div class="row">
        <div class="resp repC good"> WebBluetooth</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>

##==##

<!--
//    ____  _            _              _   _
//   |  _ \| |          | |            | | | |
//   | |_) | |_   _  ___| |_ ___   ___ | |_| |__
//   |  _ <| | | | |/ _ \ __/ _ \ / _ \| __| '_ \
//   | |_) | | |_| |  __/ || (_) | (_) | |_| | | |
//   |____/|_|\__,_|\___|\__\___/ \___/ \__|_| |_|
//
//
-->

<!-- .slide: data-background="./assets/images/inception_bluetooth_full.jpg" class="transition no-filter" data-state="quit-question"-->


##==##

<!-- .slide: class="transition-black" -->

# Web Bluetooth

![icon](./assets/images/bluetooth_logo.png)


##==##

<!-- .slide: data-type-show="prez" -->

## Web Bluetooth

![center](./assets/images/ble_hierarchy.png)

Notes:
* * **GATT** : Generic Attribute Profile
* **ATT** : Attribute Protocol
* Un device bluetooth expose plusieurs services
* Chaque service expose plusieurs caractéristiques
* Chaque caractéristique peut être lue / écrite / passée en mode notification (en fonction de sa configuration)
* Chaque devices / services / caractéristiques sont identifiés par des uuid

##==##

<!-- .slide: data-type-show="full" -->

## Web Bluetooth

### Un peu de vocabulaire !

* **GATT** : Generic Attribute Profile

* **ATT** : Attribute Protocol

* Un device bluetooth expose plusieurs services

* Chaque service expose plusieurs caractéristiques

* Chaque caractéristique peut être lue / écrite / passée en mode notification (en fonction de sa configuration)

* Chaque devices / services / caractéristiques sont identifiés par des uuid

##==##

<!-- .slide: data-type-show="prez" -->

## Utilisation

![center](./assets/images/HTTPS_icon.png)

##==##

## Utilisation

<!-- .slide: data-type-show="prez" data-state="stop-code-connect-ble" -->

![center h-500](./assets/images/Bluetooth.svg)

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-connect-ble" -->

### Utilisation

* **Https** Only <!-- .element: style="color:red" -->
* **BLE** Only !
* Activation dans chrome via les flags : ```chrome://flags/#enable-web-bluetooth```
* Accès à l'objet ```navigator.bluetooth```
* Basé sur les promises
* [Documentation](https://developers.google.com/web/updates/2015/07/interact-with-ble-devices-on-the-web)

[activation webbluetooth sous lolipop](http://stackoverflow.com/questions/34810194/can-i-try-web-bluetooth-on-chrome-for-android-lollipop)

##==##

<!-- .slide: class="with-code"  data-state="code-connect-ble stop-code-connect-by-name" -->

## Connect

```javascript
navigator.bluetooth.requestDevice({ filters: [{ services: ['battery_service'] }] })
.then(device => {...})
.catch(error => { console.log(error); });
```



<code-highlighter
    id="highlight-connect-ble"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-connect-ble" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>

Notes:
Par service

##==##

<!-- .slide: class="with-code"  data-state="stop-code-connect-ble code-connect-by-name stop-code-connection" -->

## Connect

```javascript
navigator.bluetooth.requestDevice({ filters: [{ name: ['MyDevice'] }] })
.then(device => {...})
.catch(error => { console.log(error); });
```

<code-highlighter
    id="highlight-connect-by-name"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-connect-by-name" class="highlight-code"></div>-->



Notes:
Par nom

##==##

<!-- .slide: class="with-code" data-state="stop-code-read-charact stop-connect-by-name code-connection"-->

## Connexion à un device

```javascript
navigator.bluetooth.requestDevice({ filters: [{ services: ['battery_service'] }] })
.then(device => {
  return device.gatt.connect();
})
.catch(error => { console.log(error); });
```


<code-highlighter
    id="highlight-connection"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-connection" class="highlight-code"></div>-->


##==##

<!-- .slide: class="with-code"  data-state="stop-code-write-charact code-read-charact stop-code-connection" -->

## Lecture d'une caractéristique

```javascript
device.gatt.getPrimaryService('battery_service')
.then(service => {
  // Getting Battery Level Characteristic...
  return service.getCharacteristic('battery_level');})
.then(characteristic => {
  // Reading Battery Level...
  return characteristic.readValue();})
.then(value => {
  // In Chrome 50+, a DataView is returned instead of an ArrayBuffer.
  value = value.buffer ? value : new DataView(value);
  console.log('Battery percentage is ' + value.getUint8(0));})
.catch(error => { console.log(error); });
```

<code-highlighter
    id="highlight-read-charact"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-read-charact" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>
<div class="fragment" data-fragment-index="3" hidden></div>

##==##

<!-- .slide: class="with-code"  data-state="stop-code-read-charact code-write-charact" -->

## Écrire dans une caractéristique

```javascript
device.gatt.getPrimaryService('heart_rate'))
.then(service => service.getCharacteristic('heart_rate_control_point'))
.then(characteristic => {
  // Writing 1 is the signal to reset energy expended.
  var resetEnergyExpended = new Uint8Array([1]);
  return characteristic.writeValue(resetEnergyExpended);})
.then(() => {
  console.log('Energy expended has been reset.');})
.catch(error => { console.log(error); });
```

<code-highlighter
    id="highlight-write-charact"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-write-charact" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>
<div class="fragment" data-fragment-index="3" hidden></div>


##==##

<!-- .slide: data-type-show="full" data-state="stop-code-write-charact" -->

## Open source quand tu nous tiens !

[+Francois Beaufort](https://plus.google.com/u/0/+FrancoisBeaufort) a aussi écrit une application pour configurer les balises Physical Web :

[Eddystone-Url Beacon Config](https://beaufortfrancois.github.io/sandbox/web-bluetooth/eddystone-url-config/index.html)

##==##

<!-- .slide: data-background="#3d4349" class="transition" data-type-show="prez" data-state="stop-code-write-charact"-->

![center h-600](./assets/images/demo_time.jpg)

##==##

<div class="compat">
  <div class="chrome">
    <div class="desktop dev">53</div>
    <div class="os">53</div>
    <div class="chromium">53</div>
    <div class="android">53</div>
  </div>
  <div class="firefox">
    <div class="desktop unsupport">-</div>
    <div class="os partial">draft</div>
    <div class="android unsupport">-</div>
    <div class="ios unsupport">-</div>
  </div>
  <div class="opera">
    <div class="desktop unsupport">-</div>
    <div class="android">38+</div>
  </div>
  <div class="edge">
    <div class="desktop unsupport">consider</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios unsupport">-</div>
  </div>
</div>


##==##

<!--
//
//
//    ___  ___ _ __  ___  ___  _ __ ___
//   / __|/ _ \ '_ \/ __|/ _ \| '__/ __|
//   \__ \  __/ | | \__ \ (_) | |  \__ \
//   |___/\___|_| |_|___/\___/|_|  |___/
//
//
-->

<!-- .slide: data-background="./assets/images/inception_sensors_full.jpg" class="transition no-filter"-->


##==##

<!-- .slide: class="transition-black" data-state="quit-question"-->


# Sensors

![icon](./assets/images/html5-device-access-logo.png)

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="quit-question" data-type-show="prez" -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>

<div class="qui-veut-gagner">
    <div class="question"> Préparez-vous</div>

</div>


##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="question-2" data-type-show="prez"  -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <div class="question two-line"> Lequel de ces sensors n'est pas accessible depuis le web ?</div>
    <div class="row">
        <div class="resp repA"> Magnetometre</div>
        <div class="resp repB"> Accelerometre</div>
    </div>
    <div class="row">
        <div class="resp repC"> Bluetooth</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="resp-question-2" data-type-show="prez"  -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <canvas id="chart_question_2" width="200" height="200" class="chart-resp"></canvas>
    <div class="question two-line"> Lequel de ces sensors n'est pas accessible depuis le web ?</div>
    <div class="row">
        <div class="resp repA good"> Magnetometre</div>
        <div class="resp repB "> Accelerometre</div>
    </div>
    <div class="row">
        <div class="resp repC"> Bluetooth</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>

##==##

<!--
//   __      ___ _               _   _
//   \ \    / (_) |             | | (_)
//    \ \  / / _| |__  _ __ __ _| |_ _  ___  _ __
//     \ \/ / | | '_ \| '__/ _` | __| |/ _ \| '_ \
//      \  /  | | |_) | | | (_| | |_| | (_) | | | |
//       \/   |_|_.__/|_|  \__,_|\__|_|\___/|_| |_|
//
//
-->

<!-- .slide: class="transition-black" data-state="stop-code-vibrate" -->

# Vibration

![icon](./assets/images/mobile-phone-vibration.png)

##==##

<!-- .slide: data-type-show="full" -->

## Vibration

* Vibre selon un temps donné !

* Peut faire vibrer tout un ensemble de temps
 * n = temps à vibrer
 * n+1 = temps entre vibration n et n+2

<br>

```javascript
window.navigator.vibrate(arrayOfVibration);
```

[Documentation](https://developer.mozilla.org/fr/docs/Web/API/Vibration_API)

##==##

<!-- .slide: data-type-show="prez" class="with-code"  data-state="code-vibrate"-->

## Vibration


```javascript
let arrayOfVibration = [
  100, // n = temps à vibrer
  200, // n+1 = temps entre 2 vibrations
  ]
window.navigator.vibrate(arrayOfVibration);
```

<code-highlighter
    id="highlight-vibrate"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-vibrate" class="highlight-code"></div>-->

##==##
<!-- .slide: data-state="stop-usermedia stop-code-vibrate"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop">32+</div>
    <div class="os">32+</div>
    <div class="android">32+</div>
    <div class="ios">32+</div>
  </div>
  <div class="firefox">
    <div class="desktop">11+</div>
    <div class="os">11+</div>
    <div class="android">11+</div>
    <div class="ios">11+</div>
  </div>
  <div class="opera">
    <div class="desktop">19+</div>
    <div class="android">19+</div>
  </div>
  <div class="edge">
    <div class="desktop unsupport">consider</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios unsupport">-</div>
  </div>
</div>

##==##

<!--
//     ____       _            _        _   _
//    / __ \     (_)          | |      | | (_)
//   | |  | |_ __ _  ___ _ __ | |_ __ _| |_ _  ___  _ __
//   | |  | | '__| |/ _ \ '_ \| __/ _` | __| |/ _ \| '_ \
//   | |__| | |  | |  __/ | | | || (_| | |_| | (_) | | | |
//    \____/|_|  |_|\___|_| |_|\__\__,_|\__|_|\___/|_| |_|
//
//
-->

<!-- .slide: class="transition-black" data-state="quit-question"-->


# Device Orientation

![icon](./assets/images/device-gamma.png)

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-orientation" -->

## Device Orientation

3 Axes : **Alpha, Gamma, Beta**

Se fait à plat !

<br>
<div>

![h-300](./assets/images/device-orientation-z.png)

![h-300](./assets/images/device-orientation-y.png)

![h-300](./assets/images/device-orientation-x.png)

</div>

[Documentation](https://developer.mozilla.org/en-US/docs/Web/API/Detecting_device_orientation)

Notes:
Subtilité : ça marche mieux si le téléphone est a plat

##==##

<!-- .slide: data-type-show="prez" data-state="stop-code-orientation" -->


## Device Orientation

<div>

![h-300](./assets/images/device-orientation-z.png)

![h-300](./assets/images/device-orientation-y.png)

![h-300](./assets/images/device-orientation-x.png)

</div>



Notes:
Subtilité : ça marche mieux si le téléphone est a plat


##==##

<!-- .slide: class="with-code"   data-state="code-orientation" -->

## Device Orientation

```javascript
if(window.DeviceOrientationEvent) {
  window.addEventListener("deviceorientation", process, false);
} else {
  // Le navigateur ne supporte pas l'événement deviceorientation
}

function process(event) {
  var alpha = event.alpha;
  var beta = event.beta;
  var gamma = event.gamma;

}
```


<code-highlighter
    id="highlight-orientation"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-orientation" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>

Notes:
Subtilité : ça marche mieux si le téléphone est a plat


##==##
<!-- .slide: data-state="stop-orientation stop-code-orientation" data-type-show="prez"   -->

## Orientation

### Cas Pratique

![center w-600](./assets/images/combination-lock-icon.png)


##==##
<!-- .slide: data-state="start-orientation" data-type-show="prez"   -->

## Orientation

<div class="sensorExample">
  <div class="orientation">
    <div class="safe_lock_funny_win visible-md visible-lg"></div>
    <div class="safe_lock_door">
      <div class="safe_lock_bg"></div>
      <div class="safe_lock"></div>
    </div>
    <div class="resp">
      <div class="value"></div>
      <div class="chevrons">
        <i class="first fa fa-times-circle"></i>
        <i class="second fa fa-times-circle"></i>
        <i class="third fa fa-times-circle"></i>
      </div>
    </div>
  </div>
</div>



##==##
<!-- .slide: data-state="stop-orientation stop-code-orientation"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop">7+</div>
    <div class="os">7+</div>
    <div class="android">7+</div>
    <div class="ios">7+</div>
  </div>
  <div class="firefox">
    <div class="desktop">6+</div>
    <div class="os">6+</div>
    <div class="android">6+</div>
    <div class="ios">6+</div>
  </div>
  <div class="opera">
    <div class="desktop">15+</div>
    <div class="android">12+</div>
  </div>
  <div class="edge">
    <div class="desktop">11+</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new">11</div>
  </div>
  <div class="safari">
    <div class="ios">4.3</div>
  </div>
</div>

##==##

<!--
//    _____             _          __  __       _   _
//   |  __ \           (_)        |  \/  |     | | (_)
//   | |  | | _____   ___  ___ ___| \  / | ___ | |_ _  ___  _ __
//   | |  | |/ _ \ \ / / |/ __/ _ \ |\/| |/ _ \| __| |/ _ \| '_ \
//   | |__| |  __/\ V /| | (_|  __/ |  | | (_) | |_| | (_) | | | |
//   |_____/ \___| \_/ |_|\___\___|_|  |_|\___/ \__|_|\___/|_| |_|
//
//
-->
<!-- .slide: class="transition-black" -->

# Device Motion API

![icon](./assets/images/device-axes.png)

##==##

<!-- .slide: data-type-show="full" -->

## Device Motion API

![center w-800](./assets/images/device_motion.png)

On peut tenir compte de l'accélération classique ou avec prise en charge de la gravité !

[Documentation](https://developer.mozilla.org/fr/docs/Web/API/DeviceMotionEvent)

Notes:

##==##

<!-- .slide: data-type-show="prez" data-state="stop-code-motion" -->

## Device Motion API

![center w-800](./assets/images/device_motion.png)


Notes:
On peut tenir compte de l'accélération classique ou avec prise en charge de la gravité !


##==##

<!-- .slide: class="with-code"   data-state="code-motion" -->

## Device Motion API


```javascript
// Listener of devieMotion
var deviceMotionListener = function(event){
  var x = event.acceleration.x;
  var y = event.acceleration.y;
  var z = event.acceleration.z;
  var yGravity = event.accelerationIncludingGrativity.y;
}

// We add the listener
function register(){
  window.addEventListener('devicemotion', deviceMotionListener, false);
}
```

<code-highlighter
    id="highlight-motion"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-motion" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>


##==##

<!-- .slide: data-state="stop-devicemotion stop-code-motion" data-type-show="prez"  -->

## Device Orientation

### Cas pratique

![center w-800](./assets/images/chargebatterylonger.png)



##==##

<!-- .slide: data-state="start-devicemotion" data-type-show="prez"   -->

## DeviceMotion


<div class="sensorExample">
  <div class="devicemotion">
    <div class="team">
      <div class="battery-parent">
        <div id="battery-1"></div>
        <div class="team-name">Team Firefox</div>
      </div>
    </div>
    <div class="team">
      <div class="battery-parent">
        <div id="battery-2"></div>
        <div class="team-name">Team Chrome</div>
      </div>
    </div>
    <div class="win firefox"></div>
    <div class="win chrome"></div>
  </div>
</div>

##==##
<!-- .slide: data-state="stop-devicemotion stop-code-motion"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop">7+</div>
    <div class="os">7+</div>
    <div class="android">7+</div>
    <div class="ios">7+</div>
  </div>
  <div class="firefox">
    <div class="desktop">6+</div>
    <div class="os">6+</div>
    <div class="android">6+</div>
    <div class="ios">6+</div>
  </div>
  <div class="opera">
    <div class="desktop">18+</div>
    <div class="android">18+</div>
  </div>
  <div class="edge">
    <div class="desktop">11+</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new">11</div>
  </div>
  <div class="safari">
    <div class="ios">4.3</div>
  </div>
</div>


##==##

<!--
//    ____        _   _
//   |  _ \      | | | |
//   | |_) | __ _| |_| |_ ___ _ __ _   _
//   |  _ < / _` | __| __/ _ \ '__| | | |
//   | |_) | (_| | |_| ||  __/ |  | |_| |
//   |____/ \__,_|\__|\__\___|_|   \__, |
//                                  __/ |
//                                 |___/
-->

<!-- .slide: class="transition-black"-->

# Battery Status

![icon](./assets/images/empty-battery.png)

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-battery" -->


## Battery Status


* Pourcentage de la batterie (et son évolution)

* Téléphone branché ou non

[Documentation](https://developer.mozilla.org/fr/docs/Web/API/Battery_status_API)

##==##

<!-- .slide: class="with-code"   data-state="code-battery"  -->

## Battery Status


```javascript
var battery = navigator.battery || navigator.mozBattery
|| navigator.webkitBattery;

function updateBatteryStatus() {
  console.log("Batterie chargée à : " + battery.level * 100 + " %");
  if (battery.charging) {
    console.log("Chargement de la batterie");
  }
}
battery.addEventListener("chargingchange", updateBatteryStatus);
battery.addEventListener("levelchange", updateBatteryStatus);
updateBatteryStatus();
```

<code-highlighter
    id="highlight-battery"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-battery" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>

##==##
<!-- .slide: data-state="stop-devicemotion stop-code-battery"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop">39+</div>
    <div class="os">39+</div>
    <div class="android">39+</div>
    <div class="ios">39+</div>
  </div>
  <div class="firefox">
    <div class="desktop">10+</div>
    <div class="os">10+</div>
    <div class="android">10+</div>
    <div class="ios">10+</div>
  </div>
  <div class="opera">
    <div class="desktop">35+</div>
    <div class="android">35+</div>
  </div>
  <div class="edge">
    <div class="desktop unsupport">consider</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios unsupport">-</div>
  </div>
</div>


##==##

<!--
//    _      _       _     _
//   | |    (_)     | |   | |
//   | |     _  __ _| |__ | |_
//   | |    | |/ _` | '_ \| __|
//   | |____| | (_| | | | | |_
//   |______|_|\__, |_| |_|\__|
//              __/ |
//             |___/
-->


<!-- .slide: class="transition-black"-->

# Light

![icon](./assets/images/light_detector.jpg)

##==##

<!-- .slide: data-type-show="full" -->

## Light


* Renvoi des valeurs entre 0 et > 1000 (0 étant sombre)

* Est dépendant du téléphone et de l’implémentation

* On a 2 façons de faire =>
 * Gestion par valeur (lux)
 * Gestion par états : Dim / Normal / Bright

[Documentation](https://developer.mozilla.org/en-US/docs/Web/API/Ambient_Light_Events)

##==##

<!-- .slide: class="with-code"  -->

## Light

```javascript
var deviceLightHandler = function(event) {
 var value = Math.min(45, event.value);
}

window.addEventListener('devicelight', deviceLightHandler, false);
```

Notes:
* Renvoi des valeurs entre 0 et > 1000 (0 étant sombre)
* Est dépendant du téléphone et de l’implémentation
* On a 2 façons de faire =>
 * Gestion par valeur (lux)
 * Gestion par états : Dim / Normal / Bright


##==##

<!-- .slide: data-state="stop-light" data-type-show="prez"  -->

## Light

### Cas pratique

![center w-400](./assets/images/Hanging_Bulb.jpg)


##==##

<!-- .slide: data-state="start-light" data-type-show="prez"  -->

## Light


<div class="sensorExample">
   <div id="light">
    <div class="light-bg"></div>
  </div>
</div>

##==##
<!-- .slide: data-state="stop-light"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop unsupport">-</div>
    <div class="os unsupport">-</div>
    <div class="chromium partial">draft</div>
    <div class="ios unsupport">-</div>
  </div>
  <div class="firefox">
    <div class="desktop">42+</div>
    <div class="os">42+</div>
    <div class="android">42+</div>
    <div class="ios">42+</div>
  </div>
  <div class="opera">
    <div class="desktop unsupport">-</div>
    <div class="android unsupport">-</div>
  </div>
  <div class="edge">
    <div class="desktop partial">Insider</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios unsupport">-</div>
  </div>
</div>


Notes:
Va arriver dans les generic sensors !

##==##

<!--
//    _    _  _____ ______ _____    __  __ ______ _____ _____
//   | |  | |/ ____|  ____|  __ \  |  \/  |  ____|  __ \_   _|   /\
//   | |  | | (___ | |__  | |__) | | \  / | |__  | |  | || |    /  \
//   | |  | |\___ \|  __| |  _  /  | |\/| |  __| | |  | || |   / /\ \
//   | |__| |____) | |____| | \ \  | |  | | |____| |__| || |_ / ____ \
//    \____/|_____/|______|_|  \_\ |_|  |_|______|_____/_____/_/    \_\
//
//
-->

<!-- .slide: class="transition-black" -->

# User Media

![icon](./assets/images/camera_icon.png)

##==##

<!-- .slide: data-type-show="full" -->

## User Media

* Encore dépendant des navigateurs !

* Possibilité de préciser ce qu'on récupère et on peut séparer les flux !
* Sélection de la source / Récupération de l'audio
* Devient intéressant s'il est mixé avec des effets ou des canvas.
* **HTTPS** only !
* 2 versions l'api

##==##

<!-- .slide: class="with-code"  -->

## User Media

```javascript
var vgaConstraints = {
  video: {
    mandatory: {
      maxWidth: 640,
      maxHeight: 360
    }
  }
};
```

Notes:
* Encore dépendant des navigateurs !
* Possibilité de préciser ce qu'on récupère et on peut séparer les flux !
* Sélection de la source / Récupération de l'audio
* Devient intéressant s'il est mixé avec des effets ou des canvas.
* **HTTPS** only !
* 2 versions l'api

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-user-media-v1"  -->

## User Media

### Différence entre les 2 versions ?

* V1 : approche événementielle
* V2 : approche avec des promises et simplifie le fonctionnement de récupération des objets associés (plus récent => moins de compatibilités)

Notes:

##==##

<!-- .slide:  class="transition-white"  data-type-show="prez" data-state="stop-code-user-media-v1" -->

# 2 Versions !


Notes:
* V1 : approche événementielle
* V2 : approche avec des promises et simplifie le fonctionnement de récupération des objets associés (plus récent => moins de compatibilités)


##==##

<!-- .slide: class="with-code"  data-state="code-user-media-v1 stop-code-user-media-v2" -->

## User Media - V1


```javascript
// We define the video constraints
var constraints = {video: true};
// We manage an error while getting the stream
function handleUserMediaError(error){
  console.log('navigator.getUserMedia error: ', error);
}
// We manage the success of getting the stream
function handleUserMedia(stream){
  localStream = stream;
  video.src = window.URL.createObjectURL(stream);
  video.play();
}
navigator.getUserMedia(constraints, handleUserMedia, handleUserMediaError);
```

<code-highlighter
    id="highlight-user-media-v1"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-user-media-v1" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>
<div class="fragment" data-fragment-index="3" hidden></div>
<div class="fragment" data-fragment-index="4" hidden></div>

##==##

<!-- .slide: class="with-code"  data-state="stop-code-user-media-v1 code-user-media-v2" -->

## User Media - V2

```javascript
// We define the video constraints
var constraints = {video: true};
// We manage an error while getting the stream
function handleUserMediaError(error){
  console.log('navigator.getUserMedia error: ', error);
}
// We manage the success of getting the stream
function handleUserMedia(stream){
  video.src = window.URL.createObjectURL(stream);
  video.onloadedmetadata = (e)=>video.play();
}
navigator.mediaDevices.getUserMedia(constraints)
  .then(handleUserMedia).catch(handleUserMediaError);
```


<code-highlighter
    id="highlight-user-media-v2"
    line-height="0.55em"></code-highlighter>

<div class="fragment" data-fragment-index="1" hidden></div>

Notes:
Toujours besoin de adapter.js pour faire marcher correctement !

##==##

<!-- .slide: data-type-show="prez" data-state="stop-code-user-media-v2"  -->

## User Media

### Cas pratique

![center w-600](./assets/images/photographer.jpg)



##==##
<!-- .slide: data-state="start-usermedia" data-type-show="prez"  -->

## User Media


<div class="sensorExample">
  <div id="usermedia">
    <div class="videoParent">
    <img id="photoStream" height="600px">

    </div>
  </div>
</div>

##==##
<!-- .slide: data-state="stop-usermedia stop-code-user-media-v2"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop">21+</div>
    <div class="os">21+</div>
    <div class="android">21+</div>
    <div class="ios unsupport">-</div>
  </div>
  <div class="firefox">
    <div class="desktop">42+</div>
    <div class="os">42+</div>
    <div class="android">42+</div>
    <div class="ios">42+</div>
  </div>
  <div class="opera">
    <div class="desktop">12+</div>
    <div class="android">12+</div>
  </div>
  <div class="edge">
    <div class="desktop">12+</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios partial">dev</div>
  </div>
</div>





##==##

<!--
//    _____               _           _ _
//   |  __ \             (_)         (_) |
//   | |__) | __ _____  ___ _ __ ___  _| |_ _   _
//   |  ___/ '__/ _ \ \/ / | '_ ` _ \| | __| | | |
//   | |   | | | (_) >  <| | | | | | | | |_| |_| |
//   |_|   |_|  \___/_/\_\_|_| |_| |_|_|\__|\__, |
//                                           __/ |
//                                          |___/
-->

<!-- .slide: class="transition-black" data-state="stop-code-device-proximity" -->

# Proximity

![icon](./assets/images/proximity.png)

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-device-proximity" -->

## Proximity

### Device Proximity

Firefox uniquement !

* Renvoie des valeurs entre 0 et 5 (0 étant proche)


##==##

<!-- .slide: class="with-code"  data-state="code-device-proximity stop-code-user-proximity" -->

## Proximity - Device Proximity


```javascript
var deviceProximityHandler = function(event) {
  console.log(event.value);
}

function register(){
  window.addEventListener('deviceproximity', deviceProximityHandler, false);
}

function unregister(){
  window.removeEventListener('deviceproximity', deviceProximityHandler, false);
}
```


<code-highlighter
    id="highlight-device-proximity"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-device-proximity" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>

Notes:
Firefox uniquement !
* Renvoie des valeurs entre 0 et 5 (0 étant proche)

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-device-proximity stop-code-user-proximity" -->

## Proximity

### User Proximity

Firefox uniquement !

* Renvoie des valeurs entre true à l'attribut near

[Documentation complète](https://developer.mozilla.org/fr/docs/WebAPI/Proximity)

##==##

<!-- .slide: class="with-code"  data-state="stop-code-device-proximity code-user-proximity"  -->

## Proximity - User Proximity

```javascript
var userProximityHandler = function(event) {
  if (event.near){
    console.log("Near ! ");
  }
}

function register(){
  window.addEventListener('userproximity', userProximityHandler, false);
}

function unregister(){
  window.removeEventListener('userproximity', userProximityHandler, false);
}
```

<code-highlighter
    id="highlight-user-proximity"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-user-proximity" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>

Notes:
Firefox uniquement !
* Renvoie des valeurs entre true à l'attribut near

##==##

<!-- .slide: data-state="stop-code-user-proximity" -->

<div class="compat">
  <div class="chrome">
    <div class="desktop unsupport">-</div>
    <div class="os unsupport">-</div>
    <div class="android unsupport">-</div>
    <div class="ios unsupport">-</div>
  </div>
  <div class="firefox">
    <div class="desktop">42+</div>
    <div class="os">42+</div>
    <div class="android">42+</div>
    <div class="ios">42+</div>
  </div>
  <div class="opera">
    <div class="desktop unsupport">-</div>
    <div class="android unsupport">-</div>
  </div>
  <div class="edge">
    <div class="desktop unsupport">-</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios unsupport">-</div>
  </div>
</div>


##==##

<!--
//   __          __  _        _____                      _
//   \ \        / / | |      / ____|                    | |
//    \ \  /\  / /__| |__   | (___  _ __   ___  ___  ___| |__
//     \ \/  \/ / _ \ '_ \   \___ \| '_ \ / _ \/ _ \/ __| '_ \
//      \  /\  /  __/ |_) |  ____) | |_) |  __/  __/ (__| | | |
//       \/  \/ \___|_.__/  |_____/| .__/ \___|\___|\___|_| |_|
//                                 | |
//
-->

<!-- .slide: class="transition-black" data-state="stop-code-web-speech" -->

# Web Speech API

![icon](./assets/images/voice-recognition.js.png)

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-web-speech" -->

## Web Speech


* Il reste plus intéressant d'utiliser la librairie Javascript

* Manque encore cependant de précision pour de la commande vocale => avoir des textes approximatifs de détection
* Va de pair avec la synthèse vocale disponible aussi


[Documentation complète](https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API)

##==##

<!-- .slide: class="with-code"  data-state="code-web-speech stop-code-web-speech-gramar"  -->

## Web Speech - Utilisation

```javascript
var recognition = new SpeechRecognition();
recognition.lang = voiceFR;
recognition.continuous = true;
recognition.interimResults = true;

recognition.start();
recognition.onresult = function(event) {
  var finalStr = event.results[0][0].transcript;
  console.log('Confidence: ' + finalStr);
}
```

<code-highlighter
    id="highlight-web-speech"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-web-speech" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>
<div class="fragment" data-fragment-index="3" hidden></div>
<div class="fragment" data-fragment-index="4" hidden></div>
<div class="fragment" data-fragment-index="5" hidden></div>
<div class="fragment" data-fragment-index="6" hidden></div>

##==##

<!-- .slide: class="with-code"  data-state="stop-code-web-speech code-web-speech-grammar stop-code-web-speech-synthesis" -->

## Web Speech - Grammar

```javascript
var grammar = '#JSGF V1.0; grammar colors; public <color> = aqua | [MORE COLOURS] ;'
var recognition = new SpeechRecognition();
var speechRecognitionList = new SpeechGrammarList();
speechRecognitionList.addFromString(grammar, 1);
recognition.grammars = speechRecognitionList;
//recognition.continuous = false;
recognition.lang = 'en-US';
recognition.interimResults = false;
recognition.maxAlternatives = 1;
```


<code-highlighter
    id="highlight-web-speech-grammar"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-web-speech-grammar" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>
<div class="fragment" data-fragment-index="3" hidden></div>


##==##

<!-- .slide: data-state="stop-code-web-speech-grammar code-web-speech-synthesis stop-webspeech" class="with-code"  -->

## Web Speech Synthesis

```javascript
var synth = window.speechSynthesis;

var utterThis = new SpeechSynthesisUtterance(inputTxt.value);
utterThis.voice = 'fr-FR';
utterThis.pitch = pitch.value;
utterThis.rate = rate.value;
synth.speak(utterThis);
```

<code-highlighter
    id="highlight-web-speech-synthesis"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-web-speech-synthesis" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>
<div class="fragment" data-fragment-index="3" hidden></div>
<div class="fragment" data-fragment-index="4" hidden></div>
<div class="fragment" data-fragment-index="5" hidden></div>

##==##

<!-- .slide: data-background="#3d4349" class="transition" data-state="start-webspeech stop-code-web-speech-synthesis" data-type-show="prez"  -->

![center h-600](./assets/images/demo_time.jpg)

<div id="demoSpeech" style="display: none;">
  <i class="fa fa-microphone fa-4x"></i>
  <p id="speech_input"></p>
</div>

##==##
<!-- .slide: data-state="stop-webspeech stop-code-web-speech-synthesis"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop">25+</div>
    <div class="os">25+</div>
    <div class="android">35+</div>
    <div class="ios unsupport">-</div>
  </div>
  <div class="firefox">
    <div class="desktop">45+</div>
    <div class="os">45+</div>
    <div class="android partial">draft</div>
    <div class="ios unsupport">-</div>
  </div>
  <div class="opera">
    <div class="desktop partial">support</div>
    <div class="android partial">support</div>
  </div>
  <div class="edge">
    <div class="desktop partial">dev</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios unsupport">-</div>
  </div>
</div>

##==##

<!-- .slide: data-background="./assets/images/inception_not_sensor_full.jpg" class="transition no-filter" -->



##==##

<!-- .slide: data-type-show="full" data-state="stop-code-notification"  -->

## Notification

* Possibilité d'envoyer des notifications à l'utilisateur même si la page n'est pas au premier plan !

* À besoin d'autorisations pour fonctionner

* Maintenant basé sur les services workers pour des histoires d'activités

* À coupler avec la PushAPI ;)

<br>

[Documentation](https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/showNotification) && [Old Documentation](https://developer.mozilla.org/fr/docs/Web/API/notification/Using_Web_Notifications)

##==##

<!-- .slide: data-type-show="prez" class="transition-white" data-state="stop-code-notification" -->

# Notification

Notes:
* Possibilité d'envoyer des notifications à l'utilisateur même si la page n'est pas au premier plan !
* À besoin d'autorisations pour fonctionner
* Maintenant basé sur les services workers pour des histoires d'activités
* À coupler avec la PushAPI ;)

##==##

<!-- .slide: class="with-code"  data-state="code-notification" -->

## Notification - Utilisation

```javascript
function showNotification() {
  Notification.requestPermission(function(result) {
    if (result === 'granted') {
      navigator.serviceWorker.ready.then(function(registration) {
        registration.showNotification('Vibration Sample', {
          body: 'Buzz! Buzz!',
          icon: '../images/touch/chrome-touch-icon-192x192.png',
          vibrate: [200, 100, 200, 100, 200, 100, 200],
          tag: 'vibration-sample'
        });
      });
    }
  }); }
```

<code-highlighter
    id="highlight-notification"
    line-height="0.55em"></code-highlighter>
<!--<div id="highlight-notification" class="highlight-code"></div>-->

<div class="fragment" data-fragment-index="1" hidden></div>
<div class="fragment" data-fragment-index="2" hidden></div>
<div class="fragment" data-fragment-index="3" hidden></div>

Notes:
Ici c'est un exemple de webPush Notification !
On peut aussi avoir des actions associées ! genre yes / no ....
On ajoute sur la notification


##==##

<!-- .slide: data-state="stop-code-notification"-->

<div class="compat">
  <div class="chrome">
    <div class="desktop">42+</div>
    <div class="os">42+</div>
    <div class="android">42+</div>
    <div class="ios">42+</div>
  </div>
  <div class="firefox">
    <div class="desktop">44+</div>
    <div class="os">44+</div>
    <div class="android">44+</div>
    <div class="ios">44+</div>
  </div>
  <div class="opera">
    <div class="desktop">35+</div>
    <div class="android">33+</div>
  </div>
  <div class="edge">
    <div class="desktop">14+</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios">6</div>
  </div>
</div>

##==##

<!-- .slide: data-background="./assets/images/inception_offline_full.jpg" class="transition no-filter" data-state="quit-question" data-type-show="prez"  -->



##==##

<!-- .slide: data-type-show="full"-->

## Gestion du offline

### Pleins d'outils à notre disposition

* Stockage basique de clés valeurs avec le [LocalStorage / SessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage)

<br>

* Base de données orientée objets avec [IndexDB](https://developer.mozilla.org/fr/docs/IndexedDB/Using_IndexedDB)

<br>

* Gestion de données cache avec [l'AppCache](https://developer.mozilla.org/fr/docs/Utiliser_Application_Cache) (Déprécié et n'est plus conseillé !)

<br>

* Le remplaçant de l'appCache => [Service Workers](https://developer.mozilla.org/fr/docs/Web/API/Service_Worker_API) !!

##==##

<!-- .slide: data-type-show="prez" class="transition-black" -->

# Gestion du offline

![icon](./assets/images/html5-local-storage.png)

##==##

<!-- .slide: data-type-show="prez" class="transition-white" -->

# LocalStorage <br> SessionStorage

##==##

<!-- .slide: data-type-show="prez" class="transition-white" -->

# IndexDB

##==##

<!-- .slide: data-type-show="prez" class="transition-white" -->

# AppCache

##==##

<!-- .slide: data-type-show="prez" class="transition-white" data-state="stop-code-visibility" -->

# Service Workers

##==##

<!-- .slide: data-type-show="full" data-state="stop-code-visibility"-->

## Activité dans l'application ?

* La [Page Visibility API](https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API) vous permet de gérer la visibilité de vos pages.

##==##

<!-- .slide: class="with-code"  data-state="code-visibility" -->

## Page Visivility API


```javascript
function handleVisibilityChange() {
  if (document["hidden"]) {
    // Do some stuff, unconnect things
  } else {
    // Do some stuff, reconnect things
  }
}

if (typeof document.addEventListener != "undefined" &&
  typeof document["hidden"] != "undefined") {
  document.addEventListener("visibilitychange", handleVisibilityChange, false);
}
```

<code-highlighter
    id="highlight-visibility"
    line-height="0.55em"></code-highlighter>

<!--<div id="highlight-visibility" class="highlight-code"></div>-->
<div class="fragment" data-fragment-index="1" hidden></div>

##==##

<!-- .slide:  data-state="stop-code-visibility" -->

<div class="compat">
  <div class="chrome">
    <div class="desktop">33+</div>
    <div class="os">33+</div>
    <div class="android">33+</div>
    <div class="ios">33+</div>
  </div>
  <div class="firefox">
    <div class="desktop">18+</div>
    <div class="os">18+</div>
    <div class="android">18+</div>
    <div class="ios">18+</div>
  </div>
  <div class="opera">
    <div class="desktop">20+</div>
    <div class="android">20+</div>
  </div>
  <div class="edge">
    <div class="desktop">10+</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new">10</div>
  </div>
  <div class="safari">
    <div class="ios">7</div>
  </div>
</div>


##==##

<!-- .slide: data-background="./assets/images/inception_appmanifest_full.jpg" class="transition no-filter"-->


##==##

<!-- .slide: data-type-show="full" -->

## Web Manifest

* Permets de spécifier des metas data sur l'application
* Possibilité d'ajouter l'application sur le homescreen
* Possibilité de définir des paramètres de lancement :
 * Plein écran
 * URL Spécifique au démarrage
 * Orientation
 * Présence de la barre de navigation
 * ...

[Documentation](https://developers.google.com/web/updates/2014/11/Support-for-installable-web-apps-with-webapp-manifest-in-chrome-38-for-Android)

##==##


<!-- .slide: data-background="./assets/images/web_manifest.jpg" class="transition" data-type-show="prez" -->

# Web Manifest

Notes:
* Permets de spécifier des metas data sur l'application
* Possibilité d'ajouter l'application sur le homescreen
* Possibilité de définir des paramètres de lancement :
 * Plein écran
 * URL Spécifique au démarrage
 * Orientation
 * Présence de la barre de navigation
 * ...


##==##

## Web Manifest - Utilisation

<!-- .slide: class="with-code"  data-state="" -->

<!-- .element: class="big-code" -->
```html
<link rel="manifest"
 href="/manifest.json">
```

##==##

## Web Manifest - Utilisation

<!-- .slide: class="with-code"  data-state="" -->

```json
{
  "short_name": "Kinlan's Amaze App",
  "name": "Kinlan's Amazing Application ++",
  "icons": [
    {
      "src": "launcher-icon-2x.png",
      "sizes": "96x96",
      "type": "image/png"
    }
  ],
  "start_url": "/index.html",
  "display": "standalone"
}
```


##==##


<!-- .slide: data-state="quit-question" -->

<div class="compat">
  <div class="chrome">
    <div class="desktop">46+</div>
    <div class="os">46+</div>
    <div class="android">46+</div>
    <div class="ios">46+</div>
  </div>
  <div class="firefox">
    <div class="desktop partial">draft</div>
    <div class="os partial">draft</div>
    <div class="android partial">draft</div>
    <div class="ios partial">draft</div>
  </div>
  <div class="opera">
    <div class="desktop">15+</div>
    <div class="android">26+</div>
  </div>
  <div class="edge">
    <div class="desktop partial">dev</div>
  </div>
  <div class="ie">
    <div class="old unsupport">-</div>
    <div class="new unsupport">-</div>
  </div>
  <div class="safari">
    <div class="ios partial">consider</div>
  </div>
</div>

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="quit-question" data-type-show="prez"  -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>

<div class="qui-veut-gagner">
    <div class="question"> Préparez-vous</div>

</div>

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="question-3" data-type-show="prez"  -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <div class="question two-line"> Laquelle de ces API ne fait pas encore partie d'une roadmap pour le web ? </div>
    <div class="row">
        <div class="resp repA"> WebNFC</div>
        <div class="resp repB"> Sensors Génériques</div>
    </div>
    <div class="row">
        <div class="resp repC"> FingerPrint</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="resp-question-3" data-type-show="prez"  -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <canvas id="chart_question_3" width="200" height="200" class="chart-resp"></canvas>
   <div class="question two-line"> Laquelle de ces API ne fait pas encore partie d'une roadmap pour le web ?  </div>
    <div class="row">
        <div class="resp repA"> WebNFC</div>
        <div class="resp repB"> Sensors Génériques</div>
    </div>
    <div class="row">
        <div class="resp repC good"> FingerPrint</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>


##==##

<!-- .slide: data-background="./assets/images/inception_more_full.jpg" class="transition no-filter" data-state="quit-question"-->


##==##

<!-- .slide: data-type-show="full" -->

## Ce qui arrive

*  [Web USB](https://wicg.github.io/webusb/) : Interaction avec le port série depuis le web

<br>

* [Sensors Génériques](https://w3c.github.io/sensors/) : Ouverture de tous les types de sensors disponibles et pas encore présent => Refonte des Apis actuelles

<br>

* [WebNFC](http://w3c.github.io/web-nfc/index.html) :  Mise à disposition d'un lecteur NFC à utiliser sur le téléphone

##==##

<!-- .slide: data-type-show="prez" class="transition-white" -->

# Web USB

![icon](./assets/images/web_usb.png)

##==##

<!-- .slide: data-type-show="prez" class="transition-white" -->

# Sensors Génériques

![icon](./assets/images/HTML5_Device_Access.png)

##==##

<!-- .slide: data-type-show="prez" class="transition-white" -->


# WebNFC

![icon](./assets/images/nfc_demo.png)

##==##

<!-- .slide: data-background="./assets/images/casino.jpg" data-state="hidefooter" class="transition qui-veut-gagner" data-state="quit-question" data-type-show="prez"  -->

# Jouons <br> encore un peu

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="question-4" data-type-show="prez"  -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <div class="question two-line"> Quelle est la techno derrière l'ouverture des pages web depuis un beacon ?</div>
    <div class="row">
        <div class="resp repA"> BeaconWeb</div>
        <div class="resp repB"> PhysicalWeb</div>
    </div>
    <div class="row">
        <div class="resp repC"> IBeacon</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>

##==##

<!-- .slide: data-background="./assets/images/qui_veut_gagner_argent_en_masse.png" data-state="hidefooter" class="transition qui-veut-gagner" data-state="resp-question-4" data-type-show="prez"  -->

<div class="url_jeux binomed">https://goo.gl/gsEF8b</div>
<div class="url_jeux rawgit">https://goo.gl/Kp7Cyi</div>


<div class="qui-veut-gagner">
    <canvas id="chart_question_4" width="200" height="200" class="chart-resp"></canvas>
    <div class="question two-line"> Quelle est la techno derrière l'ouverture des pages web depuis un beacon ?</div>
    <div class="row">
        <div class="resp repA"> BeaconWeb</div>
        <div class="resp repB good"> PhysicalWeb</div>
    </div>
    <div class="row">
        <div class="resp repC"> IBeacon</div>
        <div class="resp repD"> La réponse D</div>
    </div>
</div>



##==##

<!-- .slide: data-state="quit-question hidefooter" data-background="./assets/images/monthy_phython_graal.jpg" class="transition" data-copyrights="true" -->

# Conclusion


<div class="copyrights white">Monthy Python</div>


##==##

<!-- .slide: class="last-slide" -->



# <!-- .element: class="topic-title" --> Les supers pouvoirs du web

<!-- .element: class="presenter" --> **Jean-François Garreau  **

<!-- .element: class="work-rule" --> GDG Nantes Leader & Ingénieur Lucca

<!-- .element: class="email" --> **jef**@gdgnantes.com

<!-- .element: class="thank-message" --> http://goo.gl/8njYM1
